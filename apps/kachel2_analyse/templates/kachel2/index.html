{% load static %}
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kachel 2 - Analyse & Verarbeitung | PW-Script-Studio</title>
    <link rel="stylesheet" href="{% static 'css/kachel2.css' %}">
</head>
<body>
    <div class="header">
        <h1>PW-Script-Studio</h1>
        <div class="subtitle">Kachel 2 - Analyse & Verarbeitung</div>
        <button onclick="clearLocalStorage()" style="position: absolute; top: 10px; right: 10px; padding: 5px 10px; background: rgba(255,0,0,0.2); border: 1px solid red; color: white; border-radius: 5px; cursor: pointer;">
            üóëÔ∏è Cache leeren
        </button>
    </div>

    <div class="status-anzeige">
        <div id="statusOffen" class="status-indicator inactive" onclick="wechsleZuOffen()">
            üìã Offene Auftr√§ge: <span id="offenCount">0</span>
        </div>
        <div id="statusAktiv" class="status-indicator inactive" onclick="wechsleZuAktiv()">
            ‚úÖ Aktive Auftr√§ge: <span id="aktivCount">0</span>
        </div>
    </div>

    <!-- OFFENER BEREICH -->
    <div id="offenerBereich" class="bereich-container hidden">
        <div class="bereich-titel">üîµ OFFENER AUFTRAGS-BEREICH (Upwork)</div>
        
        <div class="spalten-container">
            <!-- Spalte 1: Auftrag Analyse -->
            <div class="spalte">
                <div class="spalte-header">
                    <h2>üìä Auftrag Analyse</h2>
                </div>
                
                <div class="content-container">
                    <div id="offenAuftragInfo" class="anzeige-feld">
                        <div class="anzeige-label">Auftrag:</div>
                        <div class="anzeige-wert" id="offenTitel">-</div>
                        <div class="anzeige-label" style="margin-top: 10px;">ID:</div>
                        <div class="anzeige-wert" id="offenId">-</div>
                        <div class="anzeige-label" style="margin-top: 10px;">Beschreibung:</div>
                        <div class="anzeige-wert" id="offenBeschreibung" style="font-size: 0.9em;">-</div>
                    </div>

                    <div class="eingabe-gruppe">
                        <label>Upwork Auftragsbeschreibung (f√ºr Analyse):</label>
                        <textarea id="upworkBeschreibung" placeholder="F√ºge hier die Upwork Jobbeschreibung ein..." rows="6"></textarea>
                    </div>

                    <div class="eingabe-gruppe">
                        <label>Sprache:</label>
                        <select id="spracheOffen">
                            <option value="en" selected>Englisch</option>
                            <option value="de">Deutsch</option>
                        </select>
                    </div>

                    <div class="info-box">
                        üí° Der Analyse-Workflow verarbeitet die Upwork-Beschreibung und erstellt optimierte Arbeitsproben
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="analysiereOffenenAuftrag()">
                    üîç Auftrag Analysieren
                </button>
            </div>

            <!-- Spalte 2: Erstellte Daten -->
            <div class="spalte">
                <div class="spalte-header">
                    <h2>üìù Erstellte Daten</h2>
                </div>
                
                <div class="content-container">
                    <div class="anzeige-feld">
                        <div class="anzeige-label">Arbeitsprobe Titel:</div>
                        <div class="anzeige-wert" id="probeTitel">-</div>
                    </div>

                    <div class="anzeige-feld">
                        <div class="anzeige-label">Beschreibung:</div>
                        <div class="anzeige-wert" id="probeBeschreibung">-</div>
                    </div>

                    <div class="anzeige-feld">
                        <div class="anzeige-label">Keywords:</div>
                        <div class="anzeige-wert" id="probeKeywords">-</div>
                    </div>

                    <div class="eingabe-gruppe">
                        <label>Qualit√§t w√§hlen:</label>
                    </div>
                    <div class="qualitaet-container">
                        <div class="qualitaet-option bronze" onclick="setQualitaetOffen('bronze')">
                            ü•â Bronze
                        </div>
                        <div class="qualitaet-option silber" onclick="setQualitaetOffen('silber')">
                            ü•à Silber
                        </div>
                        <div class="qualitaet-option gold" onclick="setQualitaetOffen('gold')">
                            ü•á Gold
                        </div>
                    </div>

                    <div class="eingabe-gruppe">
                        <label>Wortanzahl (0-18000):</label>
                        <input type="number" id="wortanzahlOffen" min="0" max="18000" value="1000">
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="erstelleArbeitsprobe()">
                   ‚úèÔ∏è Arbeitsprobe erstellen
                </button>
            </div>

            <!-- Spalte 3: Arbeitsprobe -->
            <div class="spalte">
                <div class="spalte-header">
                    <h2>üìÑ Arbeitsprobe</h2>
                </div>
                
                <div class="content-container">
                    <div class="probe-container">
                        <div class="probe-titel" id="finalProbeTitel">-</div>
                        <div class="probe-text" id="finalProbeText">Hier erscheint die erstellte Arbeitsprobe...</div>
                    </div>

                    <div class="plagiat-anzeige">
                        <div class="anzeige-label">Plagiatspr√ºfung:</div>
                        <div class="plagiat-bar">
                            <div class="plagiat-fill" id="plagiatOffen" style="width: 0%;">
                                0% Original
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-success" onclick="speichereInKachel1('offen')">
                    üíæ Arbeitsprobe in Kachel 1 speichern
                </button>
            </div>
        </div>
    </div>

    <!-- AKTIVER BEREICH -->
    <div id="aktiverBereich" class="bereich-container hidden">
        <div class="bereich-titel">üü¢ AKTIVER AUFTRAGS-BEREICH (Kunden)</div>
        
        <div class="spalten-container">
            <!-- Spalte 1: Aktiver Auftrag -->
            <div class="spalte">
                <div class="spalte-header">
                    <h2>üìã Aktiver Auftrag</h2>
                </div>
                
                <div class="content-container">
                    <div id="aktivAuftragInfo" class="anzeige-feld">
                        <div class="anzeige-label">Titel:</div>
                        <div class="anzeige-wert" id="aktivTitel">-</div>
                        <div class="anzeige-label" style="margin-top: 10px;">ID:</div>
                        <div class="anzeige-wert" id="aktivId">-</div>
                        <div class="anzeige-label" style="margin-top: 10px;">Beschreibung:</div>
                        <div class="anzeige-wert" id="aktivBeschreibung" style="font-size: 0.9em;">-</div>
                    </div>

                    <div class="eingabe-gruppe">
                        <label>Script-Titel vom Kunden:</label>
                        <input type="text" id="scriptTitelKunde" placeholder="Script-Titel eingeben...">
                    </div>

                    <div class="eingabe-gruppe">
                        <label>Beschreibung vom Kunden:</label>
                        <textarea id="beschreibungKunde" placeholder="Beschreibung vom Kunden eingeben..." rows="4"></textarea>
                    </div>

                    <div class="eingabe-gruppe">
                        <label>Sprache:</label>
                        <select id="spracheAktiv">
                            <option value="en" selected>Englisch</option>
                            <option value="de">Deutsch</option>
                        </select>
                    </div>

                    <div class="info-box">
                        üî¨ Online-Recherche mit Serper & Opus 4.1 wird durchgef√ºhrt
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="analysiereAktivenAuftrag()">
                    üåê Auftrag Analysieren (mit Online-Recherche)
                </button>
            </div>

            <!-- Spalte 2: Erstellte Daten -->
            <div class="spalte">
                <div class="spalte-header">
                    <h2>üìù Erstellte Daten</h2>
                </div>
                
                <div class="content-container">
                    <div class="anzeige-feld">
                        <div class="anzeige-label">Script-Titel:</div>
                        <div class="anzeige-wert" id="scriptTitel">-</div>
                    </div>

                    <div class="anzeige-feld">
                        <div class="anzeige-label">Optimierte Beschreibung:</div>
                        <div class="anzeige-wert" id="scriptBeschreibung" style="font-size: 0.95em;">-</div>
                    </div>

                    <div class="eingabe-gruppe">
                        <label>Qualit√§t w√§hlen:</label>
                    </div>
                    <div class="qualitaet-container">
                        <div class="qualitaet-option bronze" onclick="setQualitaetAktiv('bronze')">
                            ü•â Bronze
                        </div>
                        <div class="qualitaet-option silber" onclick="setQualitaetAktiv('silber')">
                            ü•à Silber
                        </div>
                        <div class="qualitaet-option gold" onclick="setQualitaetAktiv('gold')">
                            ü•á Gold
                        </div>
                    </div>

                    <div class="eingabe-gruppe">
                        <label>Wortanzahl (0-18000):</label>
                        <input type="number" id="wortanzahlAktiv" min="0" max="18000" value="1000">
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="erstelleScript()">
                    ‚úèÔ∏è Script Erstellen
                </button>
            </div>

            <!-- Spalte 3: Script -->
            <div class="spalte">
                <div class="spalte-header">
                    <h2>üìú Script</h2>
                </div>
                
                <div class="content-container">
                    <div class="probe-container">
                        <div class="probe-titel" id="finalScriptTitel">-</div>
                        <div class="probe-text" id="finalScriptText">Hier erscheint das erstellte Script...</div>
                    </div>

                    <div class="plagiat-anzeige">
                        <div class="anzeige-label">Plagiatspr√ºfung:</div>
                        <div class="plagiat-bar">
                            <div class="plagiat-fill" id="plagiatAktiv" style="width: 0%;">
                                0% Original
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-success" onclick="speichereInKachel1('aktiv')">
                    üíæ Script in Kachel 1 (Spalte 3) speichern
                </button>
            </div>
        </div>
    </div>

    <script src="{% static 'js/kachel2.js' %}"></script>
</body>
</html>